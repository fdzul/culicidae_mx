---
format: 
  revealjs:
    #theme: ["theme/q-theme.scss"]
    slide-number: c/t
    logo: "https://salud.yucatan.gob.mx/files/get/2889?v=1669754780"
    footer: "[github.com/fdzul](https://rad-peony-f290a5.netlify.app/talks/culicidae_mx_dataset/#/title-slide)"
    code-copy: true
    center-title-slide: false
highlight-style: a11y
code-link: true
height: 1080
width: 1600
execute: 
  eval: true
  echo: true
---

<h1>Distribución de Mosquitos con Importancia<br>en Salud Pública en México</h1>

<h2> </h2>

<hr>

<h3> Felipe Dzul Manzanilla </h3><h3>Fabián Correa Morales</h3> <h3>Herón Huerta</h3>

<h3> 2022-06-02 </h3>
<br>

<h3> `r fontawesome::fa("github", "black")` &nbsp; [github.com/fdzul](https://fdzul.github.io/web_site_fadm/)


![](https://wrbu.si.edu/keys/AF_AE_A/key/Aedes_Afrotropical_AFRICOM_A/Media/Images/PP_AeAlb09a.jpg){.absolute top=425 left=1100 width="300"}
![](https://wrbu.si.edu/keys/AF_AE_A/key/Aedes_Afrotropical_AFRICOM_A/Media/Images/PP_AeAeg01b.jpg){.absolute top=680 left=1250 width="300"}


## Temas
<hr style="height:2px;border-width:0;color:#330019;background-color:#330019">
&nbsp;

-   Fuentes de Información y Flujograma
-   Organizacion 

## Flujograma de la Información
<hr style="height:2px;border-width:0;color:#330019;background-color:#330019">
&nbsp;

```{r flujograma, dpi=400, echo=FALSE, fig.align ="center", out.height="100%", out.width = "100%"}
DiagrammeR::grViz("digraph {
                  # graph definitions
  graph [layout = dot, rankdir = TB]
  
  # node definitions
  node [shape = rectangle, style = filled, color = grey, 
  nodesep = 1, 
  fixedsize = false, 
  width = 1.7] 
  
  # edge definition
  edge [color = grey, arrowhead = normal, arrowtail = dot]
  
  ##### fuentes de información
  
  inf [label = 'Fuentes de Información',  fillcolor =  '#DB4437', color = 'white', fontcolor = 'white']
  
  
  ##### datasets
  
  cenaprece [label = 'CENAPRECE',  fillcolor =  '#0F9D58', color = 'white', fontcolor = 'white']
  
  indre [label = 'InDre',  fillcolor =  ' #0F9D58', color = 'white', fontcolor = 'white']
  
  revision [label = 'Revisión',  fillcolor =  ' #0F9D58', color = 'white', fontcolor = 'white']
  bas_per [label = 'Bases Personales',  fillcolor =  ' #0F9D58', color = 'white', fontcolor = 'white']
  gbif [label = 'gbif',  fillcolor =  ' #0F9D58', color = 'white', fontcolor = 'white']
  
  conabio [label = 'CONABIO',  fillcolor =  ' #0F9D58', color = 'white', fontcolor = 'white']
 
 # 
 anofeles [label = 'Anopheles',  fillcolor =  'orange', color = 'white', fontcolor = 'black']
 culicidae [label = 'Culicidae',  fillcolor =  'orange', color = 'white', fontcolor = 'black']
 ao [label = 'Aldo Ortega',  fillcolor =  'orange', color = 'white', fontcolor = 'black']
 ro [label = 'Rafael Ojeda',  fillcolor =  'orange', color = 'white', fontcolor = 'black']
 
 spocc [label = 'spocc',  fillcolor =  'orange', color = 'white', fontcolor = 'black']
 geodata [label = 'geodata',  fillcolor =  'orange', color = 'white', fontcolor = 'black']
 

 # final dataset
 
 data_final [label = 'Culicidae_mx_dataset',  fillcolor =  'DodgerBlue', color = 'white', fontcolor = 'white']
 
 ###
 aegypti [label = 'Aedes agypti',  fillcolor =  '#2EB67D', color = 'white', fontcolor = 'white']
 
 albopictus [label = 'Aedes albopictus',  fillcolor =  '#2EB67D', color = 'white', fontcolor = 'white']
 
 range [label = 'Rangos de Distribución',  fillcolor =  '#E01E5A', color = 'white', fontcolor = 'white']
 
 lgcp [label = 'Log Gaussian Cox Process',  fillcolor =  '#E01E5A', color = 'white', fontcolor = 'white']
 
 ##### define the relation
 
 inf -> {cenaprece indre revision bas_per gbif conabio}
 indre -> {anofeles culicidae} -> data_final
 bas_per -> {ao ro} -> data_final
 
 gbif -> {spocc geodata} -> data_final
 cenaprece -> data_final
 revision -> data_final
 conabio -> data_final -> {aegypti albopictus} -> {range lgcp}
 
 

 
}")

```


## Organización de las Bases de Datos
<hr style="height:2px;border-width:0;color:#330019;background-color:#330019">
&nbsp;

:::: {.columns}

::: {.column width="40%"}
```{r}
fs::dir_tree("/Users/fdzul/Library/CloudStorage/Dropbox/projects/culicidae_mx", 
             recurse = 0)
```

:::

::: {.column width="60%"}

```{r}
fs::dir_tree("/Users/fdzul/Library/CloudStorage/Dropbox/projects/culicidae_mx/1.datasets", 
             recurse = 0)
```

:::

::::

## Organización de las Bases de Datos
<hr style="height:2px;border-width:0;color:#330019;background-color:#330019">
&nbsp;

```{r}
fs::dir_tree("/Users/fdzul/Library/CloudStorage/Dropbox/projects/culicidae_mx/1.datasets/1.1.raw_data", 
             recurse = 1)
```

## Registros de **Aedes aegypti**
<hr style="height:2px;border-width:0;color:#330019;background-color:#330019">
```{r, echo=FALSE, warning=FALSE, message=FALSE}
# Step 1. load the dataset ###
load("~/Library/CloudStorage/Dropbox/projects/culicidae_mx/1.datasets/1.5.output_datasets/culicidae_mx_dataset.RData")
culicidae_mx_dataset |>
    dplyr::mutate(specie = dplyr::case_when(specie %in% c("Aedes aegypti",
                                                          "Aedes Stegomyia  aegypti  Linnaeus, 1762 ") ~ "Aedes aegypi",
                                            TRUE ~ specie)) |>
    dplyr::filter(specie == "Aedes aegypi") |>
    dplyr::group_by(dataset, specie) |>
    dplyr::summarise(occ = dplyr::n(),
                     occ_unique = dplyr::n_distinct(long, lat),
                     .groups = "drop") |>
    kableExtra::kable() |>
    kableExtra::kable_classic()

```


## Registros
<hr style="height:2px;border-width:0;color:#330019;background-color:#330019">

```{r, echo=FALSE, warning=FALSE, message=FALSE}
culicidae_mx_dataset |>
    dplyr::mutate(specie = dplyr::case_when(specie %in% c("Aedes aegypti",
                                                          "Aedes Stegomyia  aegypti  Linnaeus, 1762 ") ~ "Aedes aegypi",
                                            TRUE ~ specie)) |>
    #dplyr::filter(specie == "Aedes aegypi") |>
    dplyr::group_by(dataset, specie) |>
    dplyr::summarise(occ = dplyr::n(),
                     occ_unique = dplyr::n_distinct(long, lat),
                     .groups = "drop") |>
    kableExtra::kable() |>
    kableExtra::kable_classic() |>
    kableExtra::scroll_box(width = "100%", height = "800px")
```

## Área de ocupación
<hr style="height:2px;border-width:0;color:#330019;background-color:#330019"> 

```{r, echo=FALSE, warning=FALSE, message=FALSE}
tibble::tibble(specie = c(rep("Aedes aegypti", 12)),
               type_range = c(rep("boundary", 3),
                              rep("concave_hull", 3),
                              rep("convex_hull", 3),
                              rep("tsa", 3)),
               scale = c("locality", 
                         "municipality",
                         "state",
                         "locality",
                         "municipality",
                         "state",
                         "locality",
                         "municipality",
                         "state",
                         "locality",
                         "municipality",
                         "state"),
               area = c(6580, 7668, 7668, 6580, 7664, 7664, 6580, 7664, 7664, 6580, 7664, 7664),
               unique_records = c(3183, 3547, 3547, 3183, 3548, 3548, 3183, 3548, 3548, 3183, 3548, 3548),
               range_area = c(11201.91, 831692.2, 1947860, 37677.69, 1752088, 1752088, 38792.27, 1938004, 1938004, 39200, 1964000, 1963975),
               extent_ocurrence = c(37649, 1864072, 1864072, 37649.26, 1869299, 1869299, 37649.26, 1869299, 1869299, 37649.26, 1869299, 1869299),
               area_occupancy = c(1645, 1917, 1917, 1645, 1916, 1964, 1645, 1916, 1916, 1645, 1916, 1916),
               species_range = c(1277, 580, 31, 46004, 160, 160, 47187, 327, 327, 951, 34, 34)) |>
    kableExtra::kable() |>
    kableExtra::kable_classic() |>
    kableExtra::scroll_box(height = "800px",
                           width = "100%")
```

##
## Dios Botic!
<hr style="height:2px;border-width:0;color:#330019;background-color:#330019">
&nbsp;

- ***Bio*** : https://fdzul.github.io/web_site_fadm/

- ***email***       :     [felipe.dzul.m@gmail.com]()

- ***celular***     :     [8139945623]()

- ***slides***:     https://rad-peony-f290a5.netlify.app/talks/culicidae_mx_dataset



.footnote[La presentación fue creada via [**xaringan**](https://github.com/yihui/xaringan),
[**revealjs**](https://revealjs.com/),
[remark.js](https://remarkjs.com), [**knitr**](http://yihui.name/knitr),
& [R Markdown](https://rmarkdown.rstudio.com) en [R]() & [RStudio](2.R_Scripts/libs/rstudio_leaflet/rstudio_leaflet.css).]
